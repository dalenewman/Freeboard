(function(n){typeof exports=="object"&&typeof module=="object"?n(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],n):n(CodeMirror)})(function(n){"use strict";function i(i,r){var l=r&&r.schemaInfo,g=r&&r.quoteChar||'"',e,u,b,s,p,rt,c,d,ut,a,st,ft,h,et;if(l&&(e=i.getCursor(),u=i.getTokenAt(e),u.end>e.ch&&(u.end=e.ch,u.string=u.string.slice(0,e.ch-u.start)),b=n.innerMode(i.getMode(),u.state),b.mode.name=="xml")){var v=[],k=!1,f,nt=/\btag\b/.test(u.type)&&!/>$/.test(u.string),ht=nt&&/^\w/.test(u.string),ot;if(ht?(d=i.getLine(e.line).slice(Math.max(0,u.start-2),u.start),s=/<\/$/.test(d)?"close":/<$/.test(d)?"open":null,s&&(ot=u.start-(s=="close"?2:1))):nt&&u.string=="<"?s="open":nt&&u.string=="<\/"&&(s="close"),(nt||b.state.tagName)&&!s){var tt=l[b.state.tagName],o=tt&&tt.attrs,w=l["!attrs"];if(!o&&!w)return;if(o){if(w){rt={};for(c in w)w.hasOwnProperty(c)&&(rt[c]=w[c]);for(c in o)o.hasOwnProperty(c)&&(rt[c]=o[c]);o=rt}}else o=w;if(u.type=="string"||u.string=="="){if(d=i.getRange(t(e.line,Math.max(0,e.ch-60)),t(e.line,u.type=="string"?u.start:u.end)),ut=d.match(/([^\s\u00a0=<>\"\']+)=$/),!ut||!o.hasOwnProperty(ut[1])||!(a=o[ut[1]]))return;for(typeof a=="function"&&(a=a.call(this,i)),u.type=="string"&&(f=u.string,st=0,/['"]/.test(u.string.charAt(0))&&(g=u.string.charAt(0),f=u.string.slice(1),st++),ft=u.string.length,/['"]/.test(u.string.charAt(ft-1))&&(g=u.string.charAt(ft-1),f=u.string.substr(st,ft-2)),k=!0),h=0;h<a.length;++h)f&&a[h].lastIndexOf(f,0)!=0||v.push(g+a[h]+g)}else{u.type=="attribute"&&(f=u.string,k=!0);for(et in o)o.hasOwnProperty(et)&&(!f||et.lastIndexOf(f,0)==0)&&v.push(et)}}else{ht&&(f=u.string);k=s;var y=b.state.context,tt=y&&l[y.tagName],it=y?tt&&tt.children:l["!top"];if(it&&s!="close")for(h=0;h<it.length;++h)f&&it[h].lastIndexOf(f,0)!=0||v.push("<"+it[h]);else if(s!="close")for(p in l)l.hasOwnProperty(p)&&p!="!top"&&p!="!attrs"&&(!f||p.lastIndexOf(f,0)==0)&&v.push("<"+p);y&&(!f||s=="close"&&y.tagName.lastIndexOf(f,0)==0)&&v.push("<\/"+y.tagName+">")}return{list:v,from:k?t(e.line,ot==null?u.start:ot):e,to:k?t(e.line,u.end):e}}}var t=n.Pos;n.registerHelper("hint","xml",i)});
//# sourceMappingURL=xml-hint.min.js.map
