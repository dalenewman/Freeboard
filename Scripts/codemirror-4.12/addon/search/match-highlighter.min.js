(function(n){typeof exports=="object"&&typeof module=="object"?n(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],n):n(CodeMirror)})(function(n){"use strict";function s(n){typeof n=="object"&&(this.minChars=n.minChars,this.style=n.style,this.showToken=n.showToken,this.delay=n.delay,this.wordsOnly=n.wordsOnly);this.style==null&&(this.style=f);this.minChars==null&&(this.minChars=u);this.delay==null&&(this.delay=e);this.wordsOnly==null&&(this.wordsOnly=o);this.overlay=this.timeout=null}function t(n){var t=n.state.matchHighlighter;clearTimeout(t.timeout);t.timeout=setTimeout(function(){i(n)},t.delay)}function i(n){n.operation(function(){var t=n.state.matchHighlighter,e,o,c;if(t.overlay&&(n.removeOverlay(t.overlay),t.overlay=null),!n.somethingSelected()&&t.showToken){for(var s=t.showToken===!0?/[\w$]/:t.showToken,l=n.getCursor(),f=n.getLine(l.line),i=l.ch,u=i;i&&s.test(f.charAt(i-1));)--i;while(u<f.length&&s.test(f.charAt(u)))++u;i<u&&n.addOverlay(t.overlay=r(f.slice(i,u),s,t.style));return}(e=n.getCursor("from"),o=n.getCursor("to"),e.line==o.line)&&(!t.wordsOnly||h(n,e,o))&&(c=n.getRange(e,o).replace(/^\s+|\s+$/g,""),c.length>=t.minChars&&n.addOverlay(t.overlay=r(c,!1,t.style)))})}function h(n,t,i){var f=n.getRange(t,i),r,u;return f.match(/^\w+$/)!==null?t.ch>0&&(r={line:t.line,ch:t.ch-1},u=n.getRange(r,t),u.match(/\W/)===null)?!1:i.ch<n.getLine(t.line).length&&(r={line:i.line,ch:i.ch+1},u=n.getRange(i,r),u.match(/\W/)===null)?!1:!0:!1}function c(n,t){return(!n.start||!t.test(n.string.charAt(n.start-1)))&&(n.pos==n.string.length||!t.test(n.string.charAt(n.pos)))}function r(n,t,i){return{token:function(r){if(r.match(n)&&(!t||c(r,t)))return i;r.next();r.skipTo(n.charAt(0))||r.skipToEnd()}}}var u=2,f="matchhighlight",e=100,o=!1;n.defineOption("highlightSelectionMatches",!1,function(r,u,f){if(f&&f!=n.Init){var e=r.state.matchHighlighter.overlay;e&&r.removeOverlay(e);clearTimeout(r.state.matchHighlighter.timeout);r.state.matchHighlighter=null;r.off("cursorActivity",t)}if(u){r.state.matchHighlighter=new s(u);i(r);r.on("cursorActivity",t)}})});
//# sourceMappingURL=match-highlighter.min.js.map
