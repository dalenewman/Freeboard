(function(){var u=function(n,t){function o(n){u&&clearInterval(u);u=setInterval(function(){f.updateNow()},n)}var f=this,u=null,i=n,r=0,e=!1;o(i.refresh*1e3);this.updateNow=function(){var u,n;if((!(r>1)||i.use_thingproxy)&&!(r>2)){if(u=i.url,r==2&&i.use_thingproxy&&(u=(location.protocol=="https:"?"https:":"http:")+"//thingproxy.freeboard.io/fetch/"+encodeURI(i.url)),n=i.body,n)try{n=JSON.parse(n)}catch(o){}$.ajax({url:u,dataType:r==1?"JSONP":"JSON",type:i.method||"GET",data:n,beforeSend:function(n){try{_.each(i.headers,function(t){var i=t.name,r=t.value;_.isUndefined(i)||_.isUndefined(r)||n.setRequestHeader(i,r)})}catch(t){}},success:function(n){e=!0;t(n)},error:function(){e||(r++,f.updateNow())}})}};this.onDispose=function(){clearInterval(u);u=null};this.onSettingsChanged=function(n){e=!1;r=0;i=n;o(i.refresh*1e3);f.updateNow()}},n,t,i,r;freeboard.loadDatasourcePlugin({type_name:"JSON",settings:[{name:"url",display_name:"URL",type:"text"},{name:"use_thingproxy",display_name:"Try thingproxy",description:'A direct JSON connection will be tried first, if that fails, a JSONP connection will be tried. If that fails, you can use thingproxy, which can solve many connection problems to APIs. <a href="https://github.com/Freeboard/thingproxy" target="_blank">More information<\/a>.',type:"boolean",default_value:!0},{name:"refresh",display_name:"Refresh Every",type:"number",suffix:"seconds",default_value:5},{name:"method",display_name:"Method",type:"option",options:[{name:"GET",value:"GET"},{name:"POST",value:"POST"},{name:"PUT",value:"PUT"},{name:"DELETE",value:"DELETE"}]},{name:"body",display_name:"Body",type:"text",description:"The body of the request. Normally only used if method is POST"},{name:"headers",display_name:"Headers",type:"array",settings:[{name:"name",display_name:"Name",type:"text"},{name:"value",display_name:"Value",type:"text"}]}],newInstance:function(n,t,i){t(new u(n,i))}});n=function(n,t){function f(n){i&&clearInterval(i);i=setInterval(function(){u.updateNow()},n)}function e(n){return n.replace(/\w\S*/g,function(n){return n.charAt(0).toUpperCase()+n.substr(1).toLowerCase()})}var u=this,i=null,r=n;f(r.refresh*1e3);this.updateNow=function(){$.ajax({url:"http://api.openweathermap.org/data/2.5/weather?q="+encodeURIComponent(r.location)+"&units="+r.units,dataType:"JSONP",success:function(n){var i={place_name:n.name,sunrise:new Date(n.sys.sunrise*1e3).toLocaleTimeString(),sunset:new Date(n.sys.sunset*1e3).toLocaleTimeString(),conditions:e(n.weather[0].description),current_temp:n.main.temp,high_temp:n.main.temp_max,low_temp:n.main.temp_min,pressure:n.main.pressure,humidity:n.main.humidity,wind_speed:n.wind.speed,wind_direction:n.wind.deg};t(i)},error:function(){}})};this.onDispose=function(){clearInterval(i);i=null};this.onSettingsChanged=function(n){r=n;u.updateNow();f(r.refresh*1e3)}};freeboard.loadDatasourcePlugin({type_name:"openweathermap",display_name:"Open Weather Map API",settings:[{name:"location",display_name:"Location",type:"text",description:"Example: London, UK"},{name:"units",display_name:"Units",type:"option","default":"imperial",options:[{name:"Imperial",value:"imperial"},{name:"Metric",value:"metric"}]},{name:"refresh",display_name:"Refresh Every",type:"number",suffix:"seconds",default_value:5}],newInstance:function(t,i,r){i(new n(t,r))}});t=function(n,t){function r(n){t(n)}var u=this,i=n;this.updateNow=function(){dweetio.get_latest_dweet_for(i.thing_id,function(n,t){n||r(t[0].content)})};this.onDispose=function(){};this.onSettingsChanged=function(n){dweetio.stop_listening();i=n;dweetio.listen_for(i.thing_id,function(n){r(n.content)})};u.onSettingsChanged(n)};freeboard.loadDatasourcePlugin({type_name:"dweet_io",display_name:"Dweet.io",external_scripts:["http://dweet.io/client/dweet.io.min.js"],settings:[{name:"thing_id",display_name:"Thing Name",description:"Example: salty-dog-1",type:"text"}],newInstance:function(n,i,r){i(new t(n,r))}});i=function(n,t){function e(){i.length>0?(r<i.length&&(t(i[r]),r++),r>=i.length&&u.loop&&(r=0),r<i.length&&(f=setTimeout(e,u.refresh*1e3))):t({})}function o(){i=[];r=0;f&&(clearTimeout(f),f=null)}var s=this,u=n,i=[],r=0,f;this.updateNow=function(){o();$.ajax({url:u.datafile,dataType:u.is_jsonp?"JSONP":"JSON",success:function(n){i=_.isArray(n)?n:[];r=0;e()},error:function(){}})};this.onDispose=function(){o()};this.onSettingsChanged=function(n){u=n;s.updateNow()}};freeboard.loadDatasourcePlugin({type_name:"playback",display_name:"Playback",settings:[{name:"datafile",display_name:"Data File URL",type:"text",description:"A link to a JSON array of data."},{name:"is_jsonp",display_name:"Is JSONP",type:"boolean"},{name:"loop",display_name:"Loop",type:"boolean",description:"Rewind and loop when finished"},{name:"refresh",display_name:"Refresh Every",type:"number",suffix:"seconds",default_value:5}],newInstance:function(n,t,r){t(new i(n,r))}});r=function(n,t){function u(){i&&(clearTimeout(i),i=null)}function f(){u();i=setInterval(e.updateNow,r.refresh*1e3)}var e=this,r=n,i;this.updateNow=function(){var n=new Date,i={numeric_value:n.getTime(),full_string_value:n.toLocaleString(),date_string_value:n.toLocaleDateString(),time_string_value:n.toLocaleTimeString(),date_object:n};t(i)};this.onDispose=function(){u()};this.onSettingsChanged=function(n){r=n;f()};f()};freeboard.loadDatasourcePlugin({type_name:"clock",display_name:"Clock",settings:[{name:"refresh",display_name:"Refresh Every",type:"number",suffix:"seconds",default_value:1}],newInstance:function(n,t,i){t(new r(n,i))}})})(),function(){function v(n,t,i){var u=$(t).text(),r,f,e;u!=n&&($.isNumeric(n)&&$.isNumeric(u)?(r=n.toString().split("."),f=0,r.length>1&&(f=r[1].length),r=u.toString().split("."),e=0,r.length>1&&(e=r[1].length),jQuery({transitionValue:Number(u),precisionValue:e}).animate({transitionValue:Number(n),precisionValue:f},{duration:i,step:function(){$(t).text(this.transitionValue.toFixed(this.precisionValue))},done:function(){$(t).text(n)}})):$(t).text(n))}function y(t,i){for(var f,e,u=$("<div class='sparkline-legend'><\/div>"),r=0;r<i.length;r++)f=n[r%n.length],e=i[r],u.append("<div class='sparkline-legend-value'><span style='color:"+f+"'>&#9679;<\/span>"+e+"<\/div>");t.empty().append(u);freeboard.addStyle(".sparkline-legend","margin:5px;");freeboard.addStyle(".sparkline-legend-value","color:white; font:10px arial,san serif; float:left; overflow:hidden; width:50%;");freeboard.addStyle(".sparkline-legend-value span","font-weight:bold; padding-right:5px;")}function t(t,i,r){var u=$(t).data().values,f=$(t).data().valueMin,e=$(t).data().valueMax,o,s,h;u||(u=[],f=undefined,e=undefined);o=function(n,t){u[t]||(u[t]=[]);u[t].length>=a&&u[t].shift();u[t].push(Number(n));(f===undefined||n<f)&&(f=n);(e===undefined||n>e)&&(e=n)};_.isArray(i)?_.each(i,o):o(i,0);$(t).data().values=u;$(t).data().valueMin=f;$(t).data().valueMax=e;s='<span style="color: {{color}}">&#9679;<\/span> {{y}}';h=!1;_.each(u,function(i,u){$(t).sparkline(i,{type:"line",composite:h,height:"100%",width:"100%",fillColor:!1,lineColor:n[u%n.length],lineWidth:2,spotRadius:3,spotColor:!1,minSpotColor:"#78AB49",maxSpotColor:"#78AB49",highlightSpotColor:"#9D3926",highlightLineColor:"#9D3926",chartRangeMin:f,chartRangeMax:e,tooltipFormat:r&&r[u]?s+" ("+r[u]+")":s});h=!0})}var a=100,n=["#FF9900","#FFFFFF","#B3B4B4","#6B6B6B","#28DE28","#13F7F9","#E6EE18","#C41204","#CA3CB8","#0B1CFB"],i=freeboard.getStyleString("values"),r,u,f,e,o,s,h,c,l;freeboard.addStyle(".widget-big-text",i+"font-size:75px;");freeboard.addStyle(".tw-display","width: 100%; height:100%; display:table; table-layout:fixed;");freeboard.addStyle(".tw-tr","display:table-row;");freeboard.addStyle(".tw-tg","display:table-row-group;");freeboard.addStyle(".tw-tc","display:table-caption;");freeboard.addStyle(".tw-td","display:table-cell;");freeboard.addStyle(".tw-value",i+"overflow: hidden;display: inline-block;text-overflow: ellipsis;");freeboard.addStyle(".tw-unit","display: inline-block;padding-left: 10px;padding-bottom: 1.1em;vertical-align: bottom;");freeboard.addStyle(".tw-value-wrapper","position: relative;vertical-align: middle;height:100%;");freeboard.addStyle(".tw-sparkline","height:20px;");r=function(n){function s(){_.isUndefined(i.units)||i.units==""?r.css("max-width","100%"):r.css("max-width",o.innerWidth()-u.outerWidth(!0)+"px")}var h=this,i=n,o=$('<div class="tw-display"><\/div>'),e=$('<h2 class="section-title tw-title tw-td"><\/h2>'),r=$('<div class="tw-value"><\/div>'),u=$('<div class="tw-unit"><\/div>'),f=$('<div class="tw-sparkline tw-td"><\/div>');this.render=function(n){$(n).empty();$(o).append($('<div class="tw-tr"><\/div>').append(e)).append($('<div class="tw-tr"><\/div>').append($('<div class="tw-value-wrapper tw-td"><\/div>').append(r).append(u))).append($('<div class="tw-tr"><\/div>').append(f));$(n).append(o);s()};this.onSettingsChanged=function(n){var o,h,t;i=n;o=!_.isUndefined(n.title)&&n.title!="";h=!_.isUndefined(n.units)&&n.units!="";n.sparkline?f.attr("style",null):(delete f.data().values,f.empty(),f.hide());o?(e.html(_.isUndefined(n.title)?"":n.title),e.attr("style",null)):(e.empty(),e.hide());h?(u.html(_.isUndefined(n.units)?"":n.units),u.attr("style",null)):(u.empty(),u.hide());t=30;n.size=="big"&&(t=75,n.sparkline&&(t=60));r.css({"font-size":t+"px"});s()};this.onSizeChanged=function(){s()};this.onCalculatedValueChanged=function(n,u){n=="value"&&(i.animate?v(u,r,500):r.text(u),i.sparkline&&t(f,u))};this.onDispose=function(){};this.getHeight=function(){return i.size=="big"||i.sparkline?2:1};this.onSettingsChanged(n)};freeboard.loadWidgetPlugin({type_name:"text_widget",display_name:"Text",external_scripts:["plugins/thirdparty/jquery.sparkline.min.js"],settings:[{name:"title",display_name:"Title",type:"text"},{name:"size",display_name:"Size",type:"option",options:[{name:"Regular",value:"regular"},{name:"Big",value:"big"}]},{name:"value",display_name:"Value",type:"calculated"},{name:"sparkline",display_name:"Include Sparkline",type:"boolean"},{name:"animate",display_name:"Animate Value Changes",type:"boolean",default_value:!0},{name:"units",display_name:"Units",type:"text"}],newInstance:function(n,t){t(new r(n))}});u=0;freeboard.addStyle(".gauge-widget-wrapper","width: 100%;text-align: center;");freeboard.addStyle(".gauge-widget","width:200px;height:160px;display:inline-block;");f=function(n){function s(){o&&(e.empty(),i=new JustGage({id:r,value:_.isUndefined(t.min_value)?0:t.min_value,min:_.isUndefined(t.min_value)?0:t.min_value,max:_.isUndefined(t.max_value)?0:t.max_value,label:t.units,showInnerShadow:!1,valueFontColor:"#d3d4d4"}))}var h=this,r="gauge-"+u++,f=$('<h2 class="section-title"><\/h2>'),e=$('<div class="gauge-widget" id="'+r+'"><\/div>'),i,o=!1,t=n;this.render=function(n){o=!0;$(n).append(f).append($('<div class="gauge-widget-wrapper"><\/div>').append(e));s()};this.onSettingsChanged=function(n){n.min_value!=t.min_value||n.max_value!=t.max_value||n.units!=t.units?(t=n,s()):t=n;f.html(n.title)};this.onCalculatedValueChanged=function(n,t){_.isUndefined(i)||i.refresh(Number(t))};this.onDispose=function(){};this.getHeight=function(){return 3};this.onSettingsChanged(n)};freeboard.loadWidgetPlugin({type_name:"gauge",display_name:"Gauge",external_scripts:["plugins/thirdparty/raphael.2.1.0.min.js","plugins/thirdparty/justgage.1.0.1.js"],settings:[{name:"title",display_name:"Title",type:"text"},{name:"value",display_name:"Value",type:"calculated"},{name:"units",display_name:"Units",type:"text"},{name:"min_value",display_name:"Minimum",type:"text",default_value:0},{name:"max_value",display_name:"Maximum",type:"text",default_value:100}],newInstance:function(n,t){t(new f(n))}});freeboard.addStyle(".sparkline","width:100%;height: 75px;");e=function(n){var e=this,u=$('<h2 class="section-title"><\/h2>'),r=$('<div class="sparkline"><\/div>'),f=$("<div><\/div>"),i=n;this.render=function(n){$(n).append(u).append(r).append(f)};this.onSettingsChanged=function(n){i=n;u.html(_.isUndefined(n.title)?"":n.title);n.include_legend&&y(f,n.legend.split(","))};this.onCalculatedValueChanged=function(n,u){i.legend?t(r,u,i.legend.split(",")):t(r,u)};this.onDispose=function(){};this.getHeight=function(){var t=0,n;return i.include_legend&&i.legend&&(n=i.legend.split(",").length,n>4?t=Math.floor((n-1)/4)*.5:n&&(t=.5)),2+t};this.onSettingsChanged(n)};freeboard.loadWidgetPlugin({type_name:"sparkline",display_name:"Sparkline",external_scripts:["plugins/thirdparty/jquery.sparkline.min.js"],settings:[{name:"title",display_name:"Title",type:"text"},{name:"value",display_name:"Value",type:"calculated",multi_input:"true"},{name:"include_legend",display_name:"Include Legend",type:"boolean"},{name:"legend",display_name:"Legend",type:"text",description:"Comma-separated for multiple sparklines"}],newInstance:function(n,t){t(new e(n))}});freeboard.addStyle("div.pointer-value","position:absolute;height:95px;margin: auto;top: 0px;bottom: 0px;width: 100%;text-align:center;");o=function(n){function h(n){var t,i;if(!n||n.length<2)return[];for(t=[],t.push(["m",n[0],n[1]]),i=2;i<n.length;i+=2)t.push(["l",n[i],n[i+1]]);return t.push(["z"]),t}var c=this,u,f=3,r,t,i,e=0,o=$('<div class="widget-big-text"><\/div>'),s=$("<div><\/div>");this.render=function(n){var e,c;t=$(n).width();i=$(n).height();e=Math.min(t,i)/2-f*2;u=Raphael($(n).get()[0],t,i);c=u.circle(t/2,i/2,e);c.attr("stroke","#FF9900");c.attr("stroke-width",f);r=u.path(h([t/2,i/2-e+f,15,20,-30,0]));r.attr("stroke-width",0);r.attr("fill","#fff");$(n).append($('<div class="pointer-value"><\/div>').append(o).append(s))};this.onSettingsChanged=function(n){s.html(n.units)};this.onCalculatedValueChanged=function(n,u){if(n=="direction"){if(!_.isUndefined(r)){var f=e+180;f<u;r.animate({transform:"r"+u+","+t/2+","+i/2},250,"bounce")}e=u}else n=="value_text"&&o.html(u)};this.onDispose=function(){};this.getHeight=function(){return 4};this.onSettingsChanged(n)};freeboard.loadWidgetPlugin({type_name:"pointer",display_name:"Pointer",external_scripts:["plugins/thirdparty/raphael.2.1.0.min.js"],settings:[{name:"direction",display_name:"Direction",type:"calculated",description:"In degrees"},{name:"value_text",display_name:"Value Text",type:"calculated"},{name:"units",display_name:"Units",type:"text"}],newInstance:function(n,t){t(new o(n))}});s=function(n){function u(){t&&(clearInterval(t),t=null)}function f(){if(r&&i){var n=i+(i.indexOf("?")==-1?"?":"&")+Date.now();$(r).css({"background-image":"url("+n+")"})}}var e=this,r,t,i;this.render=function(n){$(n).css({width:"100%",height:"100%","background-size":"cover","background-position":"center"});r=n};this.onSettingsChanged=function(n){u();n.refresh&&n.refresh>0&&(t=setInterval(f,Number(n.refresh)*1e3))};this.onCalculatedValueChanged=function(n,t){n=="src"&&(i=t);f()};this.onDispose=function(){u()};this.getHeight=function(){return 4};this.onSettingsChanged(n)};freeboard.loadWidgetPlugin({type_name:"picture",display_name:"Picture",fill_size:!0,settings:[{name:"src",display_name:"Image URL",type:"calculated"},{type:"number",display_name:"Refresh every",name:"refresh",suffix:"seconds",description:"Leave blank if the image doesn't need to be refreshed"}],newInstance:function(n,t){t(new s(n))}});freeboard.addStyle(".indicator-light","border-radius:50%;width:22px;height:22px;border:2px solid #3d3d3d;margin-top:5px;float:left;background-color:#222;margin-right:10px;");freeboard.addStyle(".indicator-light.on","background-color:#FFC773;box-shadow: 0px 0px 15px #FF9900;border-color:#FDF1DF;");freeboard.addStyle(".indicator-text","margin-top:10px;");h=function(n){function e(){f.toggleClass("on",r);r?i.text(_.isUndefined(t.on_text)?"":t.on_text):i.text(_.isUndefined(t.off_text)?"":t.off_text)}var o=this,u=$('<h2 class="section-title"><\/h2>'),i=$('<div class="indicator-text"><\/div>'),f=$('<div class="indicator-light"><\/div>'),t=n,r=!1;this.render=function(n){$(n).append(u).append(f).append(i)};this.onSettingsChanged=function(n){t=n;u.html(_.isUndefined(n.title)?"":n.title);e()};this.onCalculatedValueChanged=function(n,t){n=="value"&&(r=Boolean(t));e()};this.onDispose=function(){};this.getHeight=function(){return 1};this.onSettingsChanged(n)};freeboard.loadWidgetPlugin({type_name:"indicator",display_name:"Indicator Light",settings:[{name:"title",display_name:"Title",type:"text"},{name:"value",display_name:"Value",type:"calculated"},{name:"on_text",display_name:"On Text",type:"calculated"},{name:"off_text",display_name:"Off Text",type:"calculated"}],newInstance:function(n,t){t(new h(n))}});freeboard.addStyle(".gm-style-cc a","text-shadow:none;");c=function(n){function u(){if(t&&r&&i.lat&&i.lon){var n=new google.maps.LatLng(i.lat,i.lon);r.setPosition(n);t.panTo(n)}}var e=this,f=n,t,r,i={};this.render=function(n){function i(){var i={zoom:13,center:new google.maps.LatLng(37.235,-115.811111),disableDefaultUI:!0,draggable:!1,styles:[{featureType:"water",elementType:"geometry",stylers:[{color:"#2a2a2a"}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:29},{weight:.2}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#000000"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#000000"},{lightness:16}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#000000"},{lightness:21}]},{elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#000000"},{lightness:16}]},{elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#000000"},{lightness:40}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#000000"},{lightness:19}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:17},{weight:1.2}]}]};t=new google.maps.Map(n,i);google.maps.event.addDomListener(n,"mouseenter",function(n){n.cancelBubble=!0;t.hover||(t.hover=!0,t.setOptions({zoomControl:!0}))});google.maps.event.addDomListener(n,"mouseleave",function(){t.hover&&(t.setOptions({zoomControl:!1}),t.hover=!1)});r=new google.maps.Marker({map:t});u()}window.google&&window.google.maps?i():(window.gmap_initialize=i,head.js("https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&callback=gmap_initialize"))};this.onSettingsChanged=function(n){f=n};this.onCalculatedValueChanged=function(n,t){n=="lat"?i.lat=t:n=="lon"&&(i.lon=t);u()};this.onDispose=function(){};this.getHeight=function(){return 4};this.onSettingsChanged(n)};freeboard.loadWidgetPlugin({type_name:"google_map",display_name:"Google Map",fill_size:!0,settings:[{name:"lat",display_name:"Latitude",type:"calculated"},{name:"lon",display_name:"Longitude",type:"calculated"}],newInstance:function(n,t){t(new c(n))}});freeboard.addStyle(".html-widget","white-space:normal;width:100%;height:100%");l=function(n){var r=this,t=$('<div class="html-widget"><\/div>'),i=n;this.render=function(n){$(n).append(t)};this.onSettingsChanged=function(n){i=n};this.onCalculatedValueChanged=function(n,i){n=="html"&&t.html(i)};this.onDispose=function(){};this.getHeight=function(){return Number(i.height)};this.onSettingsChanged(n)};freeboard.loadWidgetPlugin({type_name:"html",display_name:"HTML",fill_size:!0,settings:[{name:"html",display_name:"HTML",type:"calculated",description:"Can be literal HTML, or javascript that outputs HTML."},{name:"height",display_name:"Height Blocks",type:"number",default_value:4,description:"A height block is around 60 pixels"}],newInstance:function(n,t){t(new l(n))}})}();
//# sourceMappingURL=freeboard.plugins.min.js.map
